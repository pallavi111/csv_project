{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>CSV Dashboard</title>
    <!-- Bootstrap CSS CDN -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <style>
        body {
            padding: 30px;
            background-color: #f8f9fa;
        }
        h2 {
            margin-bottom: 20px;
        }
        .upload-btn {
            margin-bottom: 20px;
        }
        table {
            background-color: #fff;
        }
        th {
            text-align: center;
        }
        td {
            vertical-align: middle;
        }
        .status-PROCESSING {
            color: orange;
            font-weight: bold;
        }
        .status-COMPLETED {
            color: green;
            font-weight: bold;
        }
        .status-FAILED {
            color: red;
            font-weight: bold;
        }
    </style>
</head>
<body>

<div class="container">
    <h2>CSV Dashboard</h2>

    <div class="upload-btn">
        <a href="{% url 'upload_csv' %}" class="btn btn-primary">Upload New CSV</a>
    </div>

    <h3>Recent Uploads</h3>

    <table class="table table-striped table-bordered">
        <thead class="table-dark">
            <tr>
                <th>File</th>
                <th>Status</th>
                <th>Total Records</th>
                <th>Duplicates</th>
                <th>Processing Time (s)</th>
                <th>Uploaded At</th>
                <th>View</th>
            </tr>
        </thead>
        <tbody>
            {% for upload in uploads %}
            <tr>
                <td>{{ upload.file.name|slice:"8:" }}</td> <!-- shorten file path -->
                <td class="status-{{ upload.status }}">{{ upload.status }}</td>
                <td>{{ upload.total_records }}</td>
                <td>{{ upload.duplicate_count }}</td>
                <td>{{ upload.processing_time }}</td>
                <td>{{ upload.uploaded_at|date:"Y-m-d H:i:s" }}</td>
                <td>
                    <a href="{% url 'upload_detail' upload.id %}" class="btn btn-sm btn-info">View</a>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="7" class="text-center">No uploads yet.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- Bootstrap JS (optional for interactive elements) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
